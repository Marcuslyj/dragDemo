<!DOCTYPE html><html>
 <head>  <meta charset="utf-8" />  <title></title>  <link rel="stylesheet" type="text/css" href="css/styles.css"/>  <style type="text/css">  html,body{   width:100%;   height: 100%;  }   .wrapper{    background: #eee;    padding-top: 1rem;    padding-bottom: 1rem;    position: relative;   }   .wrapper .item{    box-sizing: border-box;     width:100%;    padding: 1rem;      background: white;        margin-bottom: 1rem;    border: 1px solid royalblue;    /*position: absolute;*/   }   .wrapper .content{    min-height: 8rem;    background: lightblue;   }   .wrapper.hide{    overflow-x: hidden;    overflow-y: visible;    height:100%;    box-sizing: border-box;   }   .wrapper.hide .content{    height: 0;    min-height: 0;    overflow: hidden;    transition:.8s;   }   .wrapper .item:nth-child(1){    margin-top:0;   }   .wrapper .item:last-child{    margin-bottom: 0;   }   .turnSmall{    position: absolute;    /*transform: scale(.5);*/   }   /*.item1{    position: absolute;       }*/   .blueline{    border:.1rem solid blue;    margin: .2rem 0;   }  </style> </head>
 <body>  <div class="wrapper"><hr class="blueline" />   <div class="item item1" >    <p>item1</p>    <div class="content"></div>   </div>   <div class="item">    <p>item2</p>    <div class="content"></div>   </div>   <div class="item">    <p>item3</p>    <div class="content"></div>   </div>   <div class="item">    <p>item4</p>    <div class="content"></div>   </div>   <div class="item">    <p>item5</p>    <div class="content"></div>   </div>   <div class="item">    <p>item6</p>    <div class="content"></div>   </div>  </div>      <script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>  <script type="text/javascript">  var timeout;  var time_touchstart=0;  var moving = false;   $(".wrapper").delegate(".item","touchstart",function(ev){    if(moving){     return;    }    moving = true;    var touch = ev.originalEvent.targetTouches[0];     var _this = this;    console.log(_this);    //    console.log(new Date().getMilliseconds());    var timeout = setTimeout(function(){         $(".wrapper").addClass("hide");     $(_this).addClass("turnSmall"); 
     $(_this)     .css("left",touch.pageX-$(".wrapper").offset().left-20)     .css("top",touch.pageY-$(".wrapper").offset().top-20);//     console.log(touch.pageX);//     console.log($(".wrapper").offset().left);    },500);   });   $(".wrapper").delegate(".turnSmall","touchmove",function(ev){    var touch = ev.originalEvent.targetTouches[0];     var _this = this;    $(_this)    .css("left",touch.pageX-$(".wrapper").offset().left-20)    .css("top",touch.pageY-$(".wrapper").offset().top-20);            //    var static_items = $(".item:not(.turnSmall)");    var clientH = static_items.eq(0).height();    var top = touch.pageY-$(".wrapper").offset().top;    console.log(top);        for(var i=0;i<static_items.length;i++){     var item_s_top = static_items.eq(i).position().top;     if(top>item_s_top && top<item_s_top+clientH){      if(top>item_s_top+clientH/2){       $(".blueline").after(static_items.eq(i));      }else{       $(".blueline").before(static_items.eq(i));      }     }         }   });   $(".wrapper").delegate(".turnSmall","touchend",function(ev){//    var touch = ev.originalEvent.targetTouches[0]; //    var _this = this;//    $(_this)//    .css("left",touch.pageX-$(".wrapper").offset().left)//    .css("top",touch.pageY-$(".wrapper").offset().top);    var _this = this;    $(_this).after($(".blueline"));    $(_this).removeClass("turnSmall");    $(".wrapper").removeClass("hide");    moving = false;   });  </script> </body></html>
